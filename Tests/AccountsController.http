### Account Registration API Demo - Accounts Endpoints
### These tests can be executed in VS Code using the REST Client extension
### Install: https://marketplace.visualstudio.com/items?itemName=humao.rest-client

@baseUrl = http://localhost:5000
@accountId = 
@newAccountId = 

### 1. GET All Accounts (Default pagination)
GET {{baseUrl}}/api/accounts
Accept: application/json

### 2. GET All Accounts (Custom pagination)
GET {{baseUrl}}/api/accounts?page=1&pageSize=5
Accept: application/json

### 3. GET All Accounts (Search by name)
GET {{baseUrl}}/api/accounts?search=John
Accept: application/json

### 4. GET All Accounts (Search by email)
GET {{baseUrl}}/api/accounts?search=@example.com
Accept: application/json

### 5. GET Account by ID (Replace with actual ID after getting all accounts)
# @name getAccount
GET {{baseUrl}}/api/accounts/{{accountId}}
Accept: application/json

### 6. CREATE New Account
# @name createAccount
POST {{baseUrl}}/api/accounts
Content-Type: application/json

{
  "firstName": "Test",
  "lastName": "User",
  "email": "test.user@example.com",
  "phone": "+1-555-TEST-001",
  "address": "123 Test Street, Test City, TS 12345",
  "status": "Active"
}

### 7. CREATE New Account (Store ID for subsequent tests)
# After executing this, copy the ID from the response to @newAccountId
# @name createAccountForUpdate
POST {{baseUrl}}/api/accounts
Content-Type: application/json

{
  "firstName": "Update",
  "lastName": "Test",
  "email": "update.test@example.com",
  "phone": "+1-555-UPDATE-001",
  "address": "456 Update Ave, Update Town, UT 67890",
  "status": "Active"
}

### 8. UPDATE Account (Replace {{newAccountId}} with ID from previous test)
PUT {{baseUrl}}/api/accounts/{{newAccountId}}
Content-Type: application/json

{
  "firstName": "Updated",
  "lastName": "User",
  "email": "updated.user@example.com",
  "phone": "+1-555-UPDATED-002",
  "address": "789 Updated Blvd, Updated City, UC 11111",
  "status": "Inactive"
}

### 9. GET Account by ID (Verify Update)
GET {{baseUrl}}/api/accounts/{{newAccountId}}
Accept: application/json

### 10. GET Registrations for Account
GET {{baseUrl}}/api/accounts/{{accountId}}/registrations
Accept: application/json

### 11. DELETE Account (Replace with actual ID)
DELETE {{baseUrl}}/api/accounts/{{newAccountId}}

### 12. GET Deleted Account (Should return 404)
GET {{baseUrl}}/api/accounts/{{newAccountId}}
Accept: application/json

### ========================================
### Validation Tests
### ========================================

### 13. CREATE Account - Missing Required Fields (Should fail validation)
POST {{baseUrl}}/api/accounts
Content-Type: application/json

{
  "firstName": "",
  "lastName": "",
  "email": "invalid-email"
}

### 14. CREATE Account - Invalid Email Format (Should fail validation)
POST {{baseUrl}}/api/accounts
Content-Type: application/json

{
  "firstName": "Test",
  "lastName": "User",
  "email": "not-an-email",
  "phone": "+1-555-0001",
  "address": "123 Test St"
}

### 15. UPDATE Non-existent Account (Should return 404)
PUT {{baseUrl}}/api/accounts/00000000-0000-0000-0000-000000000000
Content-Type: application/json

{
  "firstName": "Non",
  "lastName": "Existent",
  "email": "nonexistent@example.com",
  "phone": "+1-555-0000",
  "address": "000 None St",
  "status": "Active"
}

### 16. GET Non-existent Account (Should return 404)
GET {{baseUrl}}/api/accounts/00000000-0000-0000-0000-000000000000
Accept: application/json

### 17. DELETE Non-existent Account (Should return 404)
DELETE {{baseUrl}}/api/accounts/00000000-0000-0000-0000-000000000000
